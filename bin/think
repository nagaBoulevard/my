
# VARS
# ----
MAINDIR="$HOME/.think/"
STORAGE="$MAINDIR/storage.md"
TEMP="$MAINDIR/temp.md"

mkdir -p $MAINDIR
touch $STORAGE

# move to the $MAINDIR,
# if git is present, pull the latest modif,
# else initialize it
cd $MAINDIR
if [ -e "$MAINDIR/.git" ]; then
    git pull 2> /dev/null
else
    git init 2> /dev/null
    git remote add origin git@gitlab.com:gilo/think.git 2> /dev/null
    git add $STORAGE 2> /dev/null
fi


# add the thought to the think storage
vi $TEMP

if [ -s $TEMP ]; then
    echo -e "\n\n\n\n------------------------------\n$(date)\n" >> $STORAGE
    cat $TEMP >> $STORAGE
fi



git add $STORAGE 2> /dev/null
git commit -m "COMMIT @ $(date)" 2> /dev/null
git push -u origin master 2> /dev/null
rm -f $TEMP || true
